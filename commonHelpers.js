var v=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var c=(n,e,t)=>(v(n,e,"read from private field"),t?t.call(n):e.get(n)),i=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},l=(n,e,t,a)=>(v(n,e,"write to private field"),a?a.call(n,t):e.set(n,t),t);var w=(n,e,t)=>(v(n,e,"access private method"),t);import{S as $,i as L}from"./assets/vendor-5b791d57.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const P="/goit-js-hw-11/assets/rejectedIcon-9956cb73.svg",k="/goit-js-hw-11/assets/izitoast-close-4cebbc46.svg";class D{constructor(e){this.parent=e}add(){document.querySelector(this.parent).innerHTML='<div id="spinner-container" style="padding-top: 25px; display:flex; flex-direction:column; gap:15px; align-items:center;"><span class="js-processing-request">Loading images, please wait...</span><span class="loader"></span></div>'}remove(){document.querySelector(this.parent).innerHTML=""}}var u,d,m,h,g,f,y,S,b,O;class j{constructor(e=[],t="",a=[],s=[],r){i(this,y);i(this,b);i(this,u,void 0);i(this,d,void 0);i(this,m,void 0);i(this,h,void 0);i(this,g,void 0);i(this,f,void 0);this.rawData=e,this.parent=t,l(this,d,a),l(this,m,s),l(this,f,r),l(this,h,w(this,y,S).call(this,this.rawData,c(this,d))),l(this,g,w(this,y,S).call(this,this.rawData,c(this,m))),l(this,u,w(this,b,O).call(this,c(this,h),c(this,g)))}static testInput(e){return e.trim()?/^[a-z\s]+$/gi.test(e.trim()):!1}static showPopup(e){const t={class:"js-izitoast-message",titleColor:"#FFFFFF",messageColor:"#FFFFFF",message:e==="wrong input"?'Try something like "kitty", "best friends", "on the Moon" ;)':"Sorry, there are no images matching your search query. Please try again!",backgroundColor:e==="wrong input"?"#e0c34c":"#ef4040",progressBarColor:e==="wrong input"?"#f7e28b":"#b51b1b",messageSize:"16px",position:"topRight",displayMode:"replace",pauseOnHover:!1,iconUrl:P,close:!1,buttons:[[`<button type="button" style="background-color: transparent;"><img src=${k}></button>`,function(a,s){a.hide({transitionOut:"fadeOut"},s)}]],onOpening:function(a,s){o.container.innerHTML="",o.input.blur(),o.input.addEventListener("focus",()=>{L.hide({transitionOut:"fadeOut"},s)},{once:!0})},onClosed:function(a,s){o.input.removeEventListener("focus",()=>{L.hide({transitionOut:"fadeOut"},s)},{once:!0})}};L.show(t)}render(){document.querySelector(this.parent).innerHTML=c(this,u),document.querySelectorAll(".js-item-image").forEach((t,a)=>t.addEventListener("load",()=>{document.querySelectorAll(".js-gallery-item")[a].classList.add("visible")}))}}u=new WeakMap,d=new WeakMap,m=new WeakMap,h=new WeakMap,g=new WeakMap,f=new WeakMap,y=new WeakSet,S=function(e,t){return e.map(a=>{const s={};return t.forEach(r=>{s[r]=a[r]}),s})},b=new WeakSet,O=function(e,t){const a=c(this,f)?t.map(r=>`<ul class="js-item-desc">
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Likes</span>
              <span class="js-desc-value">${r.likes}</span>
            </li>
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Views</span>
              <span class="js-desc-value">${r.views}</span>
            </li>
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Comments</span>
              <span class="js-desc-value">${r.comments}</span>
            </li>
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Downloads</span>
              <span class="js-desc-value">${r.downloads}</span>
            </li>
          </ul>`):"";return e.map((r,p)=>`<li class="js-gallery-item"><a class="js-image-container" href="${r.largeImageURL}"><img class="js-item-image" src="${r.webformatURL}" alt="${r.tags}" /></a>${a?a[p]:""}</li>`).join(`

`)};const o={form:document.querySelector(".js-search-form"),input:document.querySelector(".js-search-input"),container:document.querySelector(".js-gallery"),checkbox:document.querySelector(".js-search-checkbox")},E="https://pixabay.com/api/",q={key:"42242477-df8643eaa45736c853493b589",image_type:"photo",orientation:"horizontal",safesearch:!0,q:null},F=new D(".js-gallery");o.form.addEventListener("submit",n=>{if(n.preventDefault(),q.q=o.input.value.trim(),!j.testInput(o.input.value.trim())){o.form.classList.add("centered"),j.showPopup("wrong input"),o.form.reset();return}F.add(),fetch(`${E}?${new URLSearchParams(q)}`).then(e=>{if(!e.ok)throw new Error("Something went wrong!");return e.json()}).then(e=>{if(!e.hits.length){o.form.classList.add("centered"),j.showPopup("nothing found"),o.form.reset();return}o.form.classList.remove("centered");const t=new j(e.hits,".js-gallery",["largeImageURL","webformatURL","tags"],["likes","views","comments","downloads"],o.checkbox.checked),a=new $(".js-gallery a",{className:"lightbox-wrapper"});F.remove(),t.render(),a.refresh(),o.form.reset()}).catch(e=>console.log(e))});o.input.addEventListener("input",n=>{/^[a-z\s]+$/gi.test(n.target.value)||setTimeout(()=>{n.target.value=n.target.value.slice(0,-1)},100)});
//# sourceMappingURL=commonHelpers.js.map
