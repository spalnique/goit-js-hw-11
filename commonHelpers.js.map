{"version":3,"file":"commonHelpers.js","sources":["../src/img/rejectedIcon.svg","../src/img/izitoast-close.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__e571c120__\"","export default \"__VITE_ASSET__40276dd1__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport rejectedIcon from './img/rejectedIcon.svg';\nimport closeIcon from './img/izitoast-close.svg';\n\nclass LoaderSpinner {\n  #previousHTML;\n\n  constructor(parentElemQuery = '') {\n    this.parent = parentElemQuery;\n    this.#previousHTML = '';\n  }\n  add() {\n    this.#previousHTML = document.querySelector(`${this.parent}`).innerHTML;\n    document.querySelector(`${this.parent}`).innerHTML =\n      '<div id=\"spinner-container\" style=\"display:flex; flex-direction:column; gap:15px; align-items:center;\"><span class=\"js-processing-request\">Loading images, please wait...</span><span class=\"loader\"></span></div>';\n  }\n\n  remove() {\n    document.querySelector(`${this.parent}`).innerHTML = this.#previousHTML;\n  }\n}\n\nclass Gallery {\n  #markup;\n  constructor(data = [], parentElemQuery = '') {\n    this.parent = parentElemQuery;\n    this.rawData = data;\n    this.cleanData = this.#dataFilter();\n    this.#markup = this.#createMarkup();\n  }\n\n  static testInput(userInput) {\n    if (!userInput.trim()) {\n      return false;\n    }\n    return /^[a-z\\s]+$/gi.test(userInput.trim());\n  }\n\n  #dataFilter(...rest) {\n    return this.rawData.map(obj => {\n      const filtered = {};\n      rest.forEach(keyName => {\n        filtered[keyName] = obj[keyName];\n      });\n      console.log(filtered);\n      return filtered;\n    });\n  }\n\n  #createMarkup() {\n    const markup = this.rawData\n      .map(\n        x => `<li class=\"js-gallery-item\">\n        <a class=\"js-image-container\" href=\"${x.largeImageURL}\"><img class=\"js-item-image\" src=\"${x.webformatURL}\" alt=\"${x.alt}\" /></a>\n        <ul class=\"js-item-desc\">\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Likes</span><span class=\"js-desc-value\">${x.likes}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Views</span><span class=\"js-desc-value\">${x.views}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Comments</span><span class=\"js-desc-value\">${x.comments}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Downloads</span><span class=\"js-desc-value\">${x.downloads}</span></li>\n        </ul>\n      </li>`\n      )\n      .join('\\n\\n');\n    return markup;\n  }\n  renderGallery() {\n    console.log(this);\n    document.querySelector(`${this.parent}`).innerHTML = this.#markup;\n  }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  input: document.querySelector('.js-search-input'),\n  container: document.querySelector('.js-gallery'),\n};\n\nconst requestUrl = 'https://pixabay.com/api/';\n\nconst requestParams = {\n  key: '42242477-df8643eaa45736c853493b589',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: null,\n};\n\nconst spinner = new LoaderSpinner('.js-gallery');\n\nconst iziOptions = {\n  class: 'js-izitoast-message',\n  titleColor: '#FFFFFF',\n  message: null,\n  messageColor: '#FFFFFF',\n  messageSize: '16px',\n  position: 'topRight',\n  backgroundColor: '#EF4040',\n  progressBarColor: '#B51B1B',\n  iconUrl: rejectedIcon,\n  close: false,\n  buttons: [\n    [\n      `<button type=\"button\" style=\"background-color: transparent;\"><img src=${closeIcon}></button>`,\n      function (instance, toast) {\n        instance.hide({ transitionOut: 'fadeOut' }, toast);\n      },\n    ],\n  ],\n  onOpening: function (instance, toast) {\n    refs.container.innerHTML = '';\n    refs.input.blur();\n    refs.input.addEventListener(\n      'focus',\n      () => {\n        iziToast.hide({ transitionOut: 'fadeOut' }, toast);\n      },\n      { once: true }\n    );\n  },\n};\n\nrefs.form.addEventListener('submit', e => {\n  e.preventDefault();\n  requestParams.q = refs.input.value.trim();\n\n  if (!Gallery.testInput(refs.input.value.trim())) {\n    (iziOptions.message =\n      'Try something like \"kitty\", \"best friends\", \"on the Moon\" ;)'),\n      iziToast.show(iziOptions);\n    refs.form.reset();\n    return;\n  }\n\n  fetch(`${requestUrl}?${new URLSearchParams(requestParams)}`)\n    .then(response => {\n      spinner.add();\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (!data.hits.length) {\n        (iziOptions.message =\n          'Sorry, there are no images matching your search query. Please try again!'),\n          iziToast.show(iziOptions);\n        refs.form.reset();\n        return;\n      }\n      const lightboxInstance = new SimpleLightbox('.js-gallery a', {\n        className: 'lightbox-wrapper',\n      });\n      const gallery = new Gallery(data.hits, '.js-gallery');\n      spinner.remove();\n      gallery.renderGallery();\n      lightboxInstance.refresh();\n      refs.form.reset();\n    })\n    .catch(error => console.log(error));\n});\n"],"names":["rejectedIcon","closeIcon","LoaderSpinner","parentElemQuery","__privateAdd","_previousHTML","__privateSet","__privateGet","Gallery","data","_dataFilter","_createMarkup","_markup","__privateMethod","dataFilter_fn","createMarkup_fn","userInput","rest","obj","filtered","keyName","x","refs","requestUrl","requestParams","spinner","iziOptions","instance","toast","iziToast","e","response","lightboxInstance","SimpleLightbox","gallery","error"],"mappings":"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"}