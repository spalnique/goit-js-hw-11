{"version":3,"file":"commonHelpers.js","sources":["../src/img/rejectedIcon.svg","../src/img/izitoast-close.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__e571c120__\"","export default \"__VITE_ASSET__40276dd1__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport rejectedIcon from './img/rejectedIcon.svg';\nimport closeIcon from './img/izitoast-close.svg';\n\nclass Spinner {\n  constructor(parentElemQuery = '') {\n    this.parent = parentElemQuery;\n  }\n  add() {\n    document.querySelector(this.parent).innerHTML =\n      '<div id=\"spinner-container\" style=\"padding-top: 25px; display:flex; flex-direction:column; gap:15px; align-items:center;\"><span class=\"js-processing-request\">Loading images, please wait...</span><span class=\"loader\"></span></div>';\n  }\n\n  remove() {\n    document.querySelector(this.parent).innerHTML = '';\n  }\n}\n\nclass Gallery {\n  #markup;\n  constructor(data = [], requiredProperties = [''], parentElemQuery = '') {\n    this.parent = parentElemQuery;\n    this.rawData = data;\n    this.cleanData = this.#dataFilter(requiredProperties);\n    this.#markup = this.#createMarkup();\n  }\n\n  static testInput(userInput) {\n    if (!userInput.trim()) {\n      return false;\n    }\n    return /^[a-z\\s]+$/gi.test(userInput.trim());\n  }\n\n  /**\n   * @param {string} result Accepts one of two strings: 'wrong input' | 'nothing found'\n   */\n\n  static showPopup(result) {\n    const options = {\n      class: 'js-izitoast-message',\n      titleColor: '#FFFFFF',\n      messageColor: '#FFFFFF',\n      message:\n        result === 'wrong input'\n          ? 'Try something like \"kitty\", \"best friends\", \"on the Moon\" ;)'\n          : 'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: result === 'wrong input' ? '#e0c34c' : '#ef4040',\n      progressBarColor: result === 'wrong input' ? '#f7e28b' : '#b51b1b',\n      messageSize: '16px',\n      position: 'topRight',\n      displayMode: 'replace',\n      pauseOnHover: false,\n      iconUrl: rejectedIcon,\n      close: false,\n\n      buttons: [\n        [\n          `<button type=\"button\" style=\"background-color: transparent;\"><img src=${closeIcon}></button>`,\n          function (instance, toast) {\n            instance.hide({ transitionOut: 'fadeOut' }, toast);\n          },\n        ],\n      ],\n      onOpening: function (_, toast) {\n        refs.container.innerHTML = '';\n        refs.input.blur();\n        refs.input.addEventListener(\n          'focus',\n          () => {\n            iziToast.hide({ transitionOut: 'fadeOut' }, toast);\n          },\n          { once: true }\n        );\n      },\n      onClosed: function (_, toast) {\n        refs.input.removeEventListener(\n          'focus',\n          () => {\n            iziToast.hide({ transitionOut: 'fadeOut' }, toast);\n          },\n          { once: true }\n        );\n      },\n    };\n    iziToast.show(options);\n  }\n\n  #dataFilter(requiredProps) {\n    return this.rawData.map(obj => {\n      const filtered = {};\n      requiredProps.forEach(keyName => {\n        filtered[keyName] = obj[keyName];\n      });\n      return filtered;\n    });\n  }\n\n  #createMarkup() {\n    const markup = this.cleanData\n      .map(\n        x => `<li class=\"js-gallery-item\">\n        <a class=\"js-image-container\" href=\"${x.largeImageURL}\"><img class=\"js-item-image\" src=\"${x.webformatURL}\" alt=\"${x.tags}\" /></a>\n        <ul class=\"js-item-desc\">\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Likes</span><span class=\"js-desc-value\">${x.likes}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Views</span><span class=\"js-desc-value\">${x.views}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Comments</span><span class=\"js-desc-value\">${x.comments}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Downloads</span><span class=\"js-desc-value\">${x.downloads}</span></li>\n        </ul>\n      </li>`\n      )\n      .join('\\n\\n');\n    return markup;\n  }\n\n  renderGallery() {\n    document.querySelector(this.parent).innerHTML = this.#markup;\n    console.log(this);\n  }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  input: document.querySelector('.js-search-input'),\n  container: document.querySelector('.js-gallery'),\n};\n\nconst requestUrl = 'https://pixabay.com/api/';\n\nconst requestParams = {\n  key: '42242477-df8643eaa45736c853493b589',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: null,\n};\n\nconst spinner = new Spinner('.js-gallery');\n\n// Код нижче був зроблений виключно у дослідницьких цілях\n\n// refs.input.addEventListener('input', e => {\n//  if (!/^[a-z\\s]+$/gi.test(e.target.value)) {\n//    setTimeout(() => {\n//      e.target.value = e.target.value.slice(0, -1);\n//    }, 100);\n//  }\n// });\n\nrefs.form.addEventListener('submit', e => {\n  e.preventDefault();\n  requestParams.q = refs.input.value.trim();\n\n  if (!Gallery.testInput(refs.input.value.trim())) {\n    refs.form.classList.add('centered');\n    Gallery.showPopup('wrong input');\n    refs.form.reset();\n    return;\n  }\n  spinner.add();\n\n  fetch(`${requestUrl}?${new URLSearchParams(requestParams)}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (!data.hits.length) {\n        refs.form.classList.add('centered');\n        Gallery.showPopup('nothing found');\n        refs.form.reset();\n        return;\n      }\n      refs.form.classList.remove('centered');\n      const gallery = new Gallery(\n        data.hits,\n        [\n          'largeImageURL',\n          'webformatURL',\n          'tags',\n          'likes',\n          'views',\n          'comments',\n          'downloads',\n        ],\n        '.js-gallery'\n      );\n      const lightboxInstance = new SimpleLightbox('.js-gallery a', {\n        className: 'lightbox-wrapper',\n      });\n\n      spinner.remove();\n      gallery.renderGallery();\n      lightboxInstance.refresh();\n      refs.form.reset();\n    })\n    .catch(error => console.log(error));\n});\n"],"names":["rejectedIcon","closeIcon","Spinner","parentElemQuery","Gallery","data","requiredProperties","__privateAdd","_dataFilter","_createMarkup","_markup","__privateMethod","dataFilter_fn","__privateSet","createMarkup_fn","userInput","result","options","instance","toast","_","refs","iziToast","__privateGet","requiredProps","obj","filtered","keyName","x","requestUrl","requestParams","spinner","e","response","gallery","lightboxInstance","SimpleLightbox","error"],"mappings":"koCAAA,MAAeA,EAAA,kDCAAC,EAAA,oDCOf,MAAMC,CAAQ,CACZ,YAAYC,EAAkB,GAAI,CAChC,KAAK,OAASA,CACf,CACD,KAAM,CACJ,SAAS,cAAc,KAAK,MAAM,EAAE,UAClC,uOACH,CAED,QAAS,CACP,SAAS,cAAc,KAAK,MAAM,EAAE,UAAY,EACjD,CACH,eAEA,MAAMC,CAAQ,CAEZ,YAAYC,EAAO,GAAIC,EAAqB,CAAC,EAAE,EAAGH,EAAkB,GAAI,CAoExEI,EAAA,KAAAC,GAUAD,EAAA,KAAAE,GA/EAF,EAAA,KAAAG,EAAA,QAEE,KAAK,OAASP,EACd,KAAK,QAAUE,EACf,KAAK,UAAYM,EAAA,KAAKH,EAAAI,GAAL,UAAiBN,GAClCO,EAAA,KAAKH,EAAUC,EAAA,KAAKF,EAAAK,GAAL,WAChB,CAED,OAAO,UAAUC,EAAW,CAC1B,OAAKA,EAAU,OAGR,eAAe,KAAKA,EAAU,KAAM,CAAA,EAFlC,EAGV,CAMD,OAAO,UAAUC,EAAQ,CACvB,MAAMC,EAAU,CACd,MAAO,sBACP,WAAY,UACZ,aAAc,UACd,QACED,IAAW,cACP,+DACA,2EACN,gBAAiBA,IAAW,cAAgB,UAAY,UACxD,iBAAkBA,IAAW,cAAgB,UAAY,UACzD,YAAa,OACb,SAAU,WACV,YAAa,UACb,aAAc,GACd,QAAShB,EACT,MAAO,GAEP,QAAS,CACP,CACE,yEAAyEC,CAAS,aAClF,SAAUiB,EAAUC,EAAO,CACzBD,EAAS,KAAK,CAAE,cAAe,SAAW,EAAEC,CAAK,CAClD,CACF,CACF,EACD,UAAW,SAAUC,EAAGD,EAAO,CAC7BE,EAAK,UAAU,UAAY,GAC3BA,EAAK,MAAM,OACXA,EAAK,MAAM,iBACT,QACA,IAAM,CACJC,EAAS,KAAK,CAAE,cAAe,SAAW,EAAEH,CAAK,CAClD,EACD,CAAE,KAAM,EAAM,CACxB,CACO,EACD,SAAU,SAAUC,EAAGD,EAAO,CAC5BE,EAAK,MAAM,oBACT,QACA,IAAM,CACJC,EAAS,KAAK,CAAE,cAAe,SAAW,EAAEH,CAAK,CAClD,EACD,CAAE,KAAM,EAAM,CACxB,CACO,CACP,EACIG,EAAS,KAAKL,CAAO,CACtB,CA6BD,eAAgB,CACd,SAAS,cAAc,KAAK,MAAM,EAAE,UAAYM,EAAA,KAAKb,GACrD,QAAQ,IAAI,IAAI,CACjB,CACH,CApGEA,EAAA,YAqEAF,EAAA,YAAAI,EAAW,SAACY,EAAe,CACzB,OAAO,KAAK,QAAQ,IAAIC,GAAO,CAC7B,MAAMC,EAAW,CAAA,EACjB,OAAAF,EAAc,QAAQG,GAAW,CAC/BD,EAASC,CAAO,EAAIF,EAAIE,CAAO,CACvC,CAAO,EACMD,CACb,CAAK,CACF,EAEDjB,EAAA,YAAAK,EAAa,UAAG,CAcd,OAbe,KAAK,UACjB,IACCc,GAAK;AAAA,8CACiCA,EAAE,aAAa,qCAAqCA,EAAE,YAAY,UAAUA,EAAE,IAAI;AAAA;AAAA,2GAErBA,EAAE,KAAK;AAAA,2GACPA,EAAE,KAAK;AAAA,8GACJA,EAAE,QAAQ;AAAA,+GACTA,EAAE,SAAS;AAAA;AAAA,YAGnH,EACA,KAAK;AAAA;AAAA,CAAM,CAEf,EAUH,MAAMP,EAAO,CACX,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,UAAW,SAAS,cAAc,aAAa,CACjD,EAEMQ,EAAa,2BAEbC,EAAgB,CACpB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAG,IACL,EAEMC,EAAU,IAAI7B,EAAQ,aAAa,EAYzCmB,EAAK,KAAK,iBAAiB,SAAUW,GAAK,CAIxC,GAHAA,EAAE,eAAc,EAChBF,EAAc,EAAIT,EAAK,MAAM,MAAM,KAAI,EAEnC,CAACjB,EAAQ,UAAUiB,EAAK,MAAM,MAAM,KAAI,CAAE,EAAG,CAC/CA,EAAK,KAAK,UAAU,IAAI,UAAU,EAClCjB,EAAQ,UAAU,aAAa,EAC/BiB,EAAK,KAAK,QACV,MACD,CACDU,EAAQ,IAAG,EAEX,MAAM,GAAGF,CAAU,IAAI,IAAI,gBAAgBC,CAAa,CAAC,EAAE,EACxD,KAAKG,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuB,EAEzC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAK5B,GAAQ,CACZ,GAAI,CAACA,EAAK,KAAK,OAAQ,CACrBgB,EAAK,KAAK,UAAU,IAAI,UAAU,EAClCjB,EAAQ,UAAU,eAAe,EACjCiB,EAAK,KAAK,QACV,MACD,CACDA,EAAK,KAAK,UAAU,OAAO,UAAU,EACrC,MAAMa,EAAU,IAAI9B,EAClBC,EAAK,KACL,CACE,gBACA,eACA,OACA,QACA,QACA,WACA,WACD,EACD,aACR,EACY8B,EAAmB,IAAIC,EAAe,gBAAiB,CAC3D,UAAW,kBACnB,CAAO,EAEDL,EAAQ,OAAM,EACdG,EAAQ,cAAa,EACrBC,EAAiB,QAAO,EACxBd,EAAK,KAAK,OAChB,CAAK,EACA,MAAMgB,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAAC"}