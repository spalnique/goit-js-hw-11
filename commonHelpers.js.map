{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nclass LoaderSpinner {\n  #previousHTML;\n  constructor(parentElemQuery = '') {\n    this.parent = parentElemQuery;\n    this.#previousHTML = '';\n  }\n  add() {\n    this.#previousHTML = document.querySelector(`${this.parent}`).innerHTML;\n    document.querySelector(`${this.parent}`).innerHTML =\n      '<div id=\"spinner-container\" style=\"display:flex; flex-direction:column; gap:15px; align-items:center;\"><span class=\"js-processing-request\">Loading images, please wait...</span><span class=\"loader\"></span></div>';\n  }\n\n  remove() {\n    document.querySelector(`${this.parent}`).innerHTML = this.#previousHTML;\n  }\n}\n\nclass Gallery {\n  #markup;\n  constructor(data = [], parentElemQuery = '') {\n    this.parent = parentElemQuery;\n    this.rawData = data;\n    this.cleanData = this.#dataFilter();\n    this.#markup = this.#createMarkup();\n  }\n\n  static testInput(userInput) {\n    if (!userInput.trim()) {\n      return false;\n    }\n    return /^[a-z\\s]+$/gi.test(userInput.trim());\n  }\n\n  #dataFilter(...rest) {\n    return this.rawData.map(obj => {\n      const filtered = {};\n      rest.forEach(keyName => {\n        filtered[keyName] = obj[keyName];\n      });\n      return filtered;\n    });\n  }\n\n  #createMarkup() {\n    const markup = this.rawData\n      .map(\n        x => `<li class=\"js-gallery-item\">\n        <a class=\"js-image-container\" href=\"${x.largeImageURL}\"><img class=\"js-item-image\" src=\"${x.webformatURL}\" alt=\"${x.alt}\" /></a>\n        <ul class=\"js-item-desc\">\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Likes</span><span class=\"js-desc-value\">${x.likes}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Views</span><span class=\"js-desc-value\">${x.views}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Comments</span><span class=\"js-desc-value\">${x.comments}</span></li>\n          <li class=\"js-desc-wrapper\"><span class=\"js-desc-prop\">Downloads</span><span class=\"js-desc-value\">${x.downloads}</span></li>\n        </ul>\n      </li>`\n      )\n      .join('\\n\\n');\n    return markup;\n  }\n  renderGallery() {\n    console.log(this);\n    document.querySelector(`${this.parent}`).innerHTML = this.#markup;\n  }\n}\n\n// obj.largeImageURL,\n//   obj.webformatURL,\n//   obj.alt,\n//   obj.likes,\n//   obj.views,\n//   obj.comments,\n//   obj.downloads;\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  input: document.querySelector('.js-search-input'),\n  container: document.querySelector('.js-gallery'),\n};\n\nrefs.form.addEventListener('submit', e => {\n  e.preventDefault();\n\n  if (!Gallery.testInput(refs.input.value)) {\n    iziToast.error({}); // add options obj\n    return;\n  }\n\n  const requestUrl = 'https://pixabay.com/api/';\n  const requestParams = {\n    key: '42242477-df8643eaa45736c853493b589',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    q: refs.input.value.trim(),\n  };\n  const spinner = new LoaderSpinner('.js-gallery');\n\n  fetch(`${requestUrl}?${new URLSearchParams(requestParams)}`)\n    .then(response => {\n      spinner.add();\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (!data.hits.length) {\n        iziToast.show(iziOptions);\n        return;\n      }\n      const lightboxInstance = new SimpleLightbox('.js-gallery a', {\n        className: 'lightbox-wrapper',\n      });\n      const gallery = new Gallery(data.hits, '.js-gallery');\n      spinner.remove();\n      gallery.renderGallery();\n      lightboxInstance.refresh();\n      refs.form.reset();\n    })\n    .catch(error => console.log(error));\n});\n"],"names":["LoaderSpinner","parentElemQuery","__privateAdd","_previousHTML","__privateSet","__privateGet","Gallery","data","_dataFilter","_createMarkup","_markup","__privateMethod","dataFilter_fn","createMarkup_fn","userInput","rest","obj","filtered","keyName","x","refs","e","iziToast","requestUrl","requestParams","spinner","response","lightboxInstance","SimpleLightbox","gallery","error"],"mappings":"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"}